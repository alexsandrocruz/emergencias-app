<ion-view>
    <ion-nav-title>
        {{ event.name }}
    </ion-nav-title>
    <ion-content>
        <img class="img-destacada-single-event" style="width: 100%;" ng-src="{{event.defaultImageThumb}}" alt="{{event.name}}" ng-if='event.defaultImageThumb'/>
        <article id="event-00" class="single">
            <header>
                <h1>{{ event.name }}</h1>
            </header>
            <div class="post-content clearfix">
                <p>{{event.description}}</p>
            </div>
            <div class="servico">
                <p>
                    <span><span class="label">Horário:</span> {{event.startsAt}}<br></span>
                    <span><span class="label">Local:</span> <a href="#/emergencias/programacao/place/{{space.id}}">{{event.place.name}}</a><br></span>
                    <span><span class="label">Endereço:</span> {{event.place.endereco}}<br></span>
                    <span ng-if='event.terms.linguagem.length > 0'><span class="label">Linguagem:</span> {{event.terms.linguagem.join(', ')}} <br></span>
                </p>
                <!--                 <p>
                    <a target="_blank" class="button button-small button-assertive" href="{{ mapUrl }}">
                        <span class="icon icon_pin"></span> Ver no mapa
                    </a>
                    </p>-->
            </div>
	    <div class="speaker" ng-repeat="speaker in event.speakers">
	      <img ng-if="speaker.photo" ng-src="{{speaker.photo}}">
	      <h2>{{speaker.name}}</h2>
	      <p ng-if="speaker.bio">{{speaker.bio}}</p>
	    </div>
            <!-- .post-content -->
            <footer>
                <div class="card" ng-if="!connected">
                    <div class="item item-text-wrap">
                        Conecte-se em
                        <a ui-sref="emergencias.meu-percurso()">Meu Percurso</a>
                        para ver seus amigos!
                    </div>
                </div>
                <div ng-show="connected && event.friends" class="friends-group">
                    <a href="#" ng-repeat="friend in event.friends"
                        class="friend" title="{{ friend.name }}">
                        <!--img com link pra minha virada respectiva -->
                        <img src="{{ friend.picture }}">
                    </a>
                    <a href="#" ng-if="view.hasMore" class="friend" ng-click="openModal()">
                        <div title="Nome dos amigos">+{{ event.allFriends.length }}</div>
                    </a><!-- link pra modal com lista de todos amigos quando exceder 3 amigos-->
                </div>
            </footer>
            </div>
        </article>
        <!-- .single -->
    </ion-content>
</ion-view>

<script id="friends-modal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-assertive">
            <h1 class="title">{{ event.allFriends.length }} amigos também marcaram essa atração</h1>
            <div class="button button-clear" ng-click="modal.hide()">
                <span class="icon icon_close"></span>
            </div>
        </ion-header-bar>
        <ion-content>
            <ion-list class="list">
                 <ion-item item-height="75px" item-width="100%" collection-repeat="friend in event.allFriends" class="item item-avatar">
                    <img src="{{ friend.picture }}" />
                    <h2>{{ friend.name }}</h2>
                    <p></p>
                </ion-item>
            </ion-list>
        </ion-content>
  </ion-modal-view>
</script>
